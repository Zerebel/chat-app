import dayjs from "dayjs";
import "react-initials-avatar/lib/ReactInitialsAvatar.css";
import { cn } from "@/lib/utils";
import { Chat } from "@prisma/client/edge";
import { ReadStatus } from "@/lib/types";

export const ChatItem = ({ createdAt, message, id }: Chat) => {
  const userId = "cm81qob310000177dtkyv1f4m";
  const readStatus: ReadStatus = "pending";

  return (
    <div className={cn("flex flex-col gap-1", id === userId && "items-end")}>
      <div className="flex gap-3 items-center">
        <p className="font-semibold">John Doe</p>
        <div className="flex gap-3 text-slate-500">
          <span>â€¢</span>

          <p>{dayjs(createdAt).format("DD MMM - HH:mma")}</p>

          {readStatus === "pending" ? (
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="22"
              height="22"
              viewBox="0 0 27 27"
              fill="none"
            >
              <g id="solar:check-read-outline">
                <path
                  id="Vector"
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M17.4317 7.80182C17.6002 7.94894 17.7035 8.15697 17.7186 8.38017C17.7338 8.60338 17.6598 8.82347 17.5127 8.99207L8.67216 19.1171C8.59295 19.2078 8.49523 19.2805 8.38558 19.3303C8.27593 19.3802 8.15688 19.4059 8.03643 19.4059C7.91599 19.4059 7.79694 19.3802 7.68728 19.3303C7.57763 19.2805 7.47992 19.2078 7.40071 19.1171L3.86427 15.0671C3.72242 14.8978 3.6526 14.6796 3.6698 14.4595C3.68701 14.2393 3.78987 14.0346 3.9563 13.8894C4.12273 13.7442 4.33946 13.6701 4.55998 13.6829C4.78049 13.6956 4.9872 13.7944 5.13573 13.9578L8.03643 17.2799L16.2412 7.88282C16.3884 7.71428 16.5964 7.61107 16.8197 7.59588C17.0429 7.58069 17.263 7.65477 17.4317 7.80182ZM23.0857 7.89745C23.4232 8.21807 23.4356 8.75245 23.1138 9.08995L13.4699 19.2149C13.3857 19.3034 13.2833 19.3725 13.1697 19.4175C13.0561 19.4625 12.9342 19.4823 12.8122 19.4756C12.6902 19.4688 12.5712 19.4357 12.4633 19.3785C12.3554 19.3212 12.2612 19.2413 12.1872 19.1441L11.7045 18.5107C11.5781 18.3459 11.5169 18.1402 11.5326 17.9331C11.5484 17.726 11.64 17.532 11.7899 17.3882C11.9399 17.2444 12.1376 17.161 12.3452 17.1539C12.5528 17.1468 12.7558 17.2165 12.9152 17.3497L21.8919 7.92557C22.0462 7.76362 22.2585 7.66957 22.4822 7.66408C22.7058 7.6586 22.9225 7.74213 23.0846 7.89632"
                  className="fill-slate-400"
                />
              </g>
            </svg>
          ) : (
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="22"
              height="22"
              viewBox="0 0 27 27"
              fill="none"
            >
              <g id="solar:check-read-outline">
                <path
                  id="Vector"
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M17.4317 7.80182C17.6002 7.94894 17.7035 8.15697 17.7186 8.38017C17.7338 8.60338 17.6598 8.82347 17.5127 8.99207L8.67216 19.1171C8.59295 19.2078 8.49523 19.2805 8.38558 19.3303C8.27593 19.3802 8.15688 19.4059 8.03643 19.4059C7.91599 19.4059 7.79694 19.3802 7.68728 19.3303C7.57763 19.2805 7.47992 19.2078 7.40071 19.1171L3.86427 15.0671C3.72242 14.8978 3.6526 14.6796 3.6698 14.4595C3.68701 14.2393 3.78987 14.0346 3.9563 13.8894C4.12273 13.7442 4.33946 13.6701 4.55998 13.6829C4.78049 13.6956 4.9872 13.7944 5.13573 13.9578L8.03643 17.2799L16.2412 7.88282C16.3884 7.71428 16.5964 7.61107 16.8197 7.59588C17.0429 7.58069 17.263 7.65477 17.4317 7.80182ZM23.0857 7.89745C23.4232 8.21807 23.4356 8.75245 23.1138 9.08995L13.4699 19.2149C13.3857 19.3034 13.2833 19.3725 13.1697 19.4175C13.0561 19.4625 12.9342 19.4823 12.8122 19.4756C12.6902 19.4688 12.5712 19.4357 12.4633 19.3785C12.3554 19.3212 12.2612 19.2413 12.1872 19.1441L11.7045 18.5107C11.5781 18.3459 11.5169 18.1402 11.5326 17.9331C11.5484 17.726 11.64 17.532 11.7899 17.3882C11.9399 17.2444 12.1376 17.161 12.3452 17.1539C12.5528 17.1468 12.7558 17.2165 12.9152 17.3497L21.8919 7.92557C22.0462 7.76362 22.2585 7.66957 22.4822 7.66408C22.7058 7.6586 22.9225 7.74213 23.0846 7.89632"
                  fill="#4976FB"
                />
              </g>
            </svg>
          )}
        </div>
      </div>
      <div>
        <div
          className={cn(
            "p-4 border-gray-100 bg-white rounded-2xl max-w-lg min-w-xs border shadow-md shadow-gray-200",
            id === userId && "bg-[#5881F9] text-white"
          )}
        >
          {message} Lorem ipsum dolor sit, amet consectetur adipisicing elit.
          Ratione error, molestiae architecto molestias expedita, debitis
          commodi nihil iusto libero quis veniam possimus, voluptatibus vitae
          neque in amet velit et perferendis.
        </div>
      </div>
    </div>
  );
};
